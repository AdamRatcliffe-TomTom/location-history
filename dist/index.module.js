import e from"axios";import t from"axios-rate-limit";var r=process.env.QPS_LIMIT||5,o=process.env.QPS_INTERVAL||1e3,i=t(e.create(),{maxRequests:r,perMilliseconds:o}),n=process.env.LOCATION_HISTORY_API_BASE_URL||"https://api.tomtom.com/locationHistory/1",a=function(e){var t=e.apiKey,r=e.adminKey,o=e.object;try{return Promise.resolve(i.post(n+"/objects?key="+t+"&adminKey="+r,o)).then(function(e){return e.data})}catch(e){return Promise.reject(e)}},s=function(e){var t=e.apiKey,r=e.adminKey,o=e.id,a=e.object;try{return Promise.resolve(i.put(n+"/objects/"+o+"?key="+t+"&adminKey="+r,a)).then(function(e){return e.data})}catch(e){return Promise.reject(e)}},c=function(e){var t=e.apiKey;try{return Promise.resolve(axios.get(n+"/objects?key="+t)).then(function(e){var r=e.data.objects.map(function(e){return u({apiKey:t,id:e.id})});return Promise.resolve(Promise.all(r))})}catch(e){return Promise.reject(e)}},u=function(e){var t=e.apiKey,r=e.id;try{return Promise.resolve(i.get(n+"/objects/"+r+"?key="+t)).then(function(e){return e.data})}catch(e){return Promise.reject(e)}},m=function(e){var t=e.apiKey,r=e.id;try{var o=i.delete(n+"/objects/"+r+"?key="+t);return Promise.resolve(o.data)}catch(e){return Promise.reject(e)}};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},y.apply(this,arguments)}var p=process.env.LOCATION_HISTORY_API_BASE_URL||"https://api.tomtom.com/locationHistory/1",d=function(e){var t=e.apiKey,r=e.adminKey,o=e.objectId,n=e.longitude,a=e.latitude,s=e.altitude,c=e.timestamp;try{var u=p+"/history/positions?key="+t+"&adminKey="+r,m=y({type:"Feature",geometry:{type:"Point",coordinates:[n,a].concat(Boolean(s)?[s]:[])},object:o},c&&{timestamp:c});return Promise.resolve(i.post(u,m)).then(function(e){return e.data})}catch(e){return Promise.reject(e)}},v=function(e){var t=e.apiKey,r=e.objectId;try{return Promise.resolve(i.get(p+"/history/position/"+r+"?key="+t)).then(function(e){return e.data})}catch(e){return Promise.reject(e)}},l=function(e){var t=e.apiKey,r=e.adminKey,o=e.objectId,n=e.from,a=e.to,s=e.maxResults,c=e.pageNumber;try{var u=p+"/history/positions/"+o+"?key="+t+"&adminKey="+r+"&from="+n;a&&(u+="&to="+a),s&&(u+="&maxResults="+s),c&&(u+="&pageNumber="+c);var m=i.get(u);return Promise.resolve(m.data)}catch(e){return Promise.reject(e)}},P=function(e){var t=e.apiKey,r=e.adminKey;try{var o=i.delete(p+"/history/position?key="+t+"&adminKey="+r);return Promise.resolve(o.data)}catch(e){return Promise.reject(e)}};export{a as addObject,P as clearPositionHistory,m as deleteObject,s as editObject,u as getObjectDetail,c as getObjects,v as lastPosition,l as positionHistory,d as sendPosition};
//# sourceMappingURL=index.module.js.map
