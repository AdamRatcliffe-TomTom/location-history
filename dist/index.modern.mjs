import t from"axios";import e from"axios-rate-limit";const a=process.env.QPS_LIMIT||5,o=process.env.QPS_INTERVAL||1e3,i=e(t.create(),{maxRequests:a,perMilliseconds:o}),s=process.env.LOCATION_HISTORY_API_BASE_URL||"https://api.tomtom.com/locationHistory/1",n=async({apiKey:t,adminKey:e,object:a})=>{const o=`${s}/objects?key=${t}&adminKey=${e}`,{data:n}=await i.post(o,a);return n},y=async({apiKey:t,adminKey:e,id:a,object:o})=>{const n=`${s}/objects/${a}?key=${t}&adminKey=${e}`,{data:y}=await i.put(n,o);return y},r=async({apiKey:t})=>{const e=`${s}/objects?key=${t}`,{data:a}=await axios.get(e),o=a.objects.map(({id:e})=>c({apiKey:t,id:e}));return await Promise.all(o)},c=async({apiKey:t,id:e})=>{const a=`${s}/objects/${e}?key=${t}`,{data:o}=await i.get(a);return o},p=async({apiKey:t,id:e})=>{const a=`${s}/objects/${e}?key=${t}`,{data:o}=i.delete(a);return o},d=process.env.LOCATION_HISTORY_API_BASE_URL||"https://api.tomtom.com/locationHistory/1",$=async({apiKey:t,longitude:e,latitude:a,altitude:o})=>{const s=`${d}/history/positions?key=${t}`,n={type:"Feature",geometry:{type:"Point",coordinates:[e,a,...Boolean(o)?[o]:[]]}},{data:y}=await i.post(s,n);return y},m=async({apiKey:t,objectId:e})=>{const a=`${d}/history/position/${e}?key=${t}`,{data:o}=await i.get(a);return o},u=async({apiKey:t,adminKey:e,objectId:a,from:o,to:s,maxResults:n,pageNumber:y})=>{let r=`${d}/history/positions/${a}?key=${t}&adminKey=${e}&from=${o}`;s&&(r+=`&to=${s}`),n&&(r+=`&maxResults=${n}`),y&&(r+=`&pageNumber=${y}`);const{data:c}=i.get(r);return c},K=async({apiKey:t,adminKey:e})=>{const a=`${d}/history/position?key=${t}&adminKey=${e}`,{data:o}=i.delete(a);return o};export{n as addObject,K as clearPositionHistory,p as deleteObject,y as editObject,c as getObjectDetail,r as getObjects,m as lastPosition,u as positionHistory,$ as sendPosition};
//# sourceMappingURL=index.modern.mjs.map
