import t from"axios";import e from"axios-rate-limit";const a=process.env.QPS_LIMIT||5,o=process.env.QPS_INTERVAL||1e3,i=e(t.create(),{maxRequests:a,perMilliseconds:o}),s=process.env.LOCATION_HISTORY_API_BASE_URL||"https://api.tomtom.com/locationHistory/1",n=async({apiKey:t,adminKey:e,object:a})=>{const o=`${s}/objects?key=${t}&adminKey=${e}`,{data:n}=await i.post(o,a);return n},r=async({apiKey:t,adminKey:e,id:a,object:o})=>{const n=`${s}/objects/${a}?key=${t}&adminKey=${e}`,{data:r}=await i.put(n,o);return r},c=async({apiKey:t})=>{const e=`${s}/objects?key=${t}`,{data:a}=await axios.get(e),o=a.objects.map(({id:e})=>y({apiKey:t,id:e}));return await Promise.all(o)},y=async({apiKey:t,id:e})=>{const a=`${s}/objects/${e}?key=${t}`,{data:o}=await i.get(a);return o},p=async({apiKey:t,id:e})=>{const a=`${s}/objects/${e}?key=${t}`,{data:o}=i.delete(a);return o};function d(){return d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},d.apply(this,arguments)}const m=process.env.LOCATION_HISTORY_API_BASE_URL||"https://api.tomtom.com/locationHistory/1",$=async({apiKey:t,objectId:e,longitude:a,latitude:o,altitude:s,timestamp:n})=>{const r=`${m}/history/positions?key=${t}`,c=d({type:"Feature",geometry:{type:"Point",coordinates:[a,o,...Boolean(s)?[s]:[]]},object:e},n&&{timestamp:n}),{data:y}=await i.post(r,c);return y},u=async({apiKey:t,objectId:e})=>{const a=`${m}/history/position/${e}?key=${t}`,{data:o}=await i.get(a);return o},l=async({apiKey:t,adminKey:e,objectId:a,from:o,to:s,maxResults:n,pageNumber:r})=>{let c=`${m}/history/positions/${a}?key=${t}&adminKey=${e}&from=${o}`;s&&(c+=`&to=${s}`),n&&(c+=`&maxResults=${n}`),r&&(c+=`&pageNumber=${r}`);const{data:y}=i.get(c);return y},b=async({apiKey:t,adminKey:e})=>{const a=`${m}/history/position?key=${t}&adminKey=${e}`,{data:o}=i.delete(a);return o};export{n as addObject,b as clearPositionHistory,p as deleteObject,r as editObject,y as getObjectDetail,c as getObjects,u as lastPosition,l as positionHistory,$ as sendPosition};
//# sourceMappingURL=index.modern.mjs.map
