{"version":3,"file":"index.module.js","sources":["../services/objects.js"],"sourcesContent":["import axios from \"axios\";\nimport rateLimit from \"axios-rate-limit\";\n\nconst QPS_LIMIT = process.env.QPS_LIMIT || 5;\nconst QPS_INTERVAL = process.env.QPS_INTERVAL || 1000;\nconst LOCATION_HISTORY_API_BASE_URL =\n  process.env.LOCATION_HISTORY_API_BASE_URL ||\n  \"https://api.tomtom.com/locationHistory/1\";\n\nconst http = rateLimit(axios.create(), {\n  maxRequests: QPS_LIMIT,\n  perMilliseconds: QPS_INTERVAL\n});\n\nconst addObject = async ({ apiKey, adminKey, object }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects?key=${apiKey}&adminKey=${adminKey}`;\n  const { data } = await http.post(url, object);\n  return data;\n};\n\nconst editObject = async ({ apiKey, adminKey, id, object }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}&adminKey=${adminKey}`;\n  const { data } = await http.put(url, object);\n  return data;\n};\n\nconst getObjects = async ({ apiKey }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects?key=${apiKey}`;\n  const { data } = await axios.get(url);\n  const objectDetailRequests = data.objects.map(({ id }) =>\n    getObjectDetail({ apiKey, id })\n  );\n  const objects = await Promise.all(objectDetailRequests);\n  return objects;\n};\n\nconst getObjectDetail = async ({ apiKey, id }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}`;\n  const { data } = await http.get(url);\n  return data;\n};\n\nconst deleteObject = async ({ apiKey, id }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}`;\n  const { data } = http.delete(url);\n  return data;\n};\n\nexport { addObject, editObject, getObjects, getObjectDetail, deleteObject };\n"],"names":["process","env","QPS_LIMIT","QPS_INTERVAL","LOCATION_HISTORY_API_BASE_URL","http","rateLimit","axios","create","maxRequests","perMilliseconds","addObject","_ref","apiKey","adminKey","object","post","then","_ref2","data","e","Promise","reject","editObject","_ref3","id","resolve","put","getObjects","_ref5","get","objectDetailRequests","_ref6","objects","map","_ref7","getObjectDetail","all","_ref8","deleteObject","_ref10","_http$delete"],"mappings":"qDAGA,MAAkBA,QAAQC,IAAIC,WAAa,EACzBC,EAAGH,QAAQC,IAAIE,cAAgB,IAC3CC,EACJJ,QAAQC,IAAIG,+BACZ,2CAEQC,EAAGC,EAAUC,EAAMC,SAAU,CACrCC,YAAaP,EACbQ,gBAAiBP,IAGbQ,WAASC,GAAA,IAAkBC,EAAAD,EAANC,OAAQC,EAAAA,EAAAA,SAAUC,EAAMH,EAANG,OAAM,IACyC,uBACnEV,EAAKW,KADbZ,kBAA6CS,EAAM,aAAaC,EACzCC,IAAOE,KAAA,SAAAC,GAC7C,OADQC,EAAAA,IACI,EAGd,CAFC,MAEDC,GAAA,OAAAC,QAAAC,OAAAF,EAAA,CAAA,IAAMG,SAAsBV,GAAAA,IAAAA,IAAAA,OAAQC,EAAQU,EAARV,SAAUW,EAAAA,EAAAA,GAAIV,EAAMS,EAANT,OAAM,IAC0C,OAAAM,QAAAK,QACzErB,EAAKsB,IADbvB,cAAyCqB,EAAE,QAAQZ,EAAM,aAAaC,EAChDC,IAA7BI,KAAAA,SAAAA,GACR,OADQA,EAAAA,IACI,GACb,oCAEKS,EAAAA,gBAA4Bf,EAAAgB,EAANhB,OAAM,IACqC,OAC9CN,QAAAA,QAAAA,EAAMuB,IADd1B,kBAA6CS,yBAElCkB,EADdC,EAAJb,KAC0Bc,QAAQC,IAAI,SAAAC,GAC5CC,OAAAA,EAAgB,CAAEvB,OAAAA,EAAQY,GADqBA,EAAAA,IAChB,GAC/B,OACoBJ,QAAAA,QAAAA,QAAQgB,IAAIN,KAEnC,CAAA,MAAAX,GAAA,OAAAC,QAAAC,OAAAF,EAAA,CAAA,EAEKgB,WAAeE,GAAA,IAAkBzB,EAAAyB,EAANzB,OAAQY,EAAAA,EAAAA,OACoC,OACpDpB,QAAAA,QAAAA,EAAKyB,IADb1B,EAAyCqB,YAAAA,EAAUZ,QAAAA,IAC1DM,KAAAA,SAAAA,GACR,SADQA,IACI,EACb,CAAA,MAAAC,GAAA,OAAAC,QAAAC,OAAAF,EAAA,CAAA,EAEKmB,WAAYC,GAAA,IAAkB3B,EAAA2B,EAAN3B,OAAQY,EAAAA,EAAAA,OACpC,IACiBpB,EAAAA,EAAW,OADbD,EAAyCqB,YAAAA,EAAUZ,QAAAA,GAElE,OAAAQ,QAAAK,QADYe,EAAJtB,KAIV,CAFC,MAEDC,GAAA,OAAAC,QAAAC,OAAAF,EAAA,CAAA"}