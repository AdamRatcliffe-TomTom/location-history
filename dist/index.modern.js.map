{"version":3,"file":"index.modern.js","sources":["../services/objects.js"],"sourcesContent":["import axios from \"axios\";\nimport valvelet from \"valvelet\";\n\nconst QPS_LIMIT = process.env.QPS_LIMIT || 5;\nconst QPS_INTERVAL = process.env.QPS_INTERVAL || 1000;\nconst LOCATION_HISTORY_API_BASE_URL =\n  process.env.LOCATION_HISTORY_API_BASE_URL ||\n  \"https://api.tomtom.com/locationHistory/1\";\n\nconst addObject = async ({ apiKey, adminKey, object }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects?key=${apiKey}&adminKey=${adminKey}`;\n  const { data } = await axios.post(url, object);\n  return data;\n};\n\nconst editObject = async ({ apiKey, adminKey, id, object }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}&adminKey=${adminKey}`;\n  const { data } = await axios.put(url, object);\n  return data;\n};\n\nconst getObjects = async ({ apiKey }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects?key=${apiKey}`;\n  const { data } = await axios.get(url);\n  const objectDetailRequests = data.objects.map(({ id }) =>\n    getObjectDetail({ apiKey, id })\n  );\n  const objects = await Promise.all(objectDetailRequests);\n  return objects;\n};\n\nconst getObjectDetail = valvelet(\n  async ({ apiKey, id }) => {\n    const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}`;\n    const { data } = await axios.get(url);\n    return data;\n  },\n  QPS_LIMIT,\n  QPS_INTERVAL\n);\n\nconst deleteObject = async ({ apiKey, id }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}`;\n  const { data } = axios.delete(url);\n  return data;\n};\n\nexport { addObject, editObject, getObjects, getObjectDetail, deleteObject };\n"],"names":["QPS_LIMIT","process","env","QPS_INTERVAL","LOCATION_HISTORY_API_BASE_URL","addObject","async","apiKey","adminKey","object","url","data","axios","post","editObject","id","put","getObjects","get","objectDetailRequests","objects","map","getObjectDetail","Promise","all","valvelet","deleteObject","delete"],"mappings":"6CAGA,MAAMA,EAAYC,QAAQC,IAAIF,WAAa,EACrCG,EAAeF,QAAQC,IAAIC,cAAgB,MAE/CF,QAAQC,IAAIE,+BACZ,2CAEIC,EAAYC,OAASC,SAAQC,WAAUC,aAC3C,MAAMC,EAAO,GAAEN,iBAA6CG,cAAmBC,KACzEG,KAAEA,SAAoBC,EAACC,KAAKH,EAAKD,GACvC,OAAOE,GAGHG,EAAaR,OAASC,SAAQC,WAAUO,KAAIN,aAChD,QAAa,GAAEL,aAAyCW,SAAUR,cAAmBC,KAC/EG,KAAEA,SAAeC,EAAMI,IAAIN,EAAKD,GACtC,OAAOE,GAGHM,EAAaX,OAASC,aAC1B,MAASG,EAAI,GAAEN,iBAA6CG,KACtDI,KAAEA,SAAoBC,EAACM,IAAIR,GAC3BS,EAAuBR,EAAKS,QAAQC,IAAI,EAAGN,QAC/CO,EAAgB,CAAEf,SAAQQ,QAG5B,aAD6BQ,QAACC,IAAIL,EAC3BC,EAGYE,EAAGG,EACtBnB,OAASC,SAAQQ,SACf,MAAML,EAAO,GAAEN,aAAyCW,SAAUR,KAC5DI,KAAEA,SAAeC,EAAMM,IAAIR,GACjC,OACFC,GACAX,EACAG,GAGgBuB,EAAGpB,OAASC,SAAQQ,SACpC,MAAML,EAAO,GAAEN,aAAyCW,SAAUR,KAC5DI,KAAEA,GAASC,EAAMe,OAAOjB,GAC9B,OAAOC"}