{"version":3,"file":"index.modern.mjs","sources":["../services/objects.js"],"sourcesContent":["import axios from \"axios\";\nimport rateLimit from \"axios-rate-limit\";\n\nconst QPS_LIMIT = process.env.QPS_LIMIT || 5;\nconst QPS_INTERVAL = process.env.QPS_INTERVAL || 1000;\nconst LOCATION_HISTORY_API_BASE_URL =\n  process.env.LOCATION_HISTORY_API_BASE_URL ||\n  \"https://api.tomtom.com/locationHistory/1\";\n\nconst http = rateLimit(axios.create(), {\n  maxRequests: QPS_LIMIT,\n  perMilliseconds: QPS_INTERVAL\n});\n\nconst addObject = async ({ apiKey, adminKey, object }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects?key=${apiKey}&adminKey=${adminKey}`;\n  const { data } = await http.post(url, object);\n  return data;\n};\n\nconst editObject = async ({ apiKey, adminKey, id, object }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}&adminKey=${adminKey}`;\n  const { data } = await http.put(url, object);\n  return data;\n};\n\nconst getObjects = async ({ apiKey }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects?key=${apiKey}`;\n  const { data } = await axios.get(url);\n  const objectDetailRequests = data.objects.map(({ id }) =>\n    getObjectDetail({ apiKey, id })\n  );\n  const objects = await Promise.all(objectDetailRequests);\n  return objects;\n};\n\nconst getObjectDetail = async ({ apiKey, id }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}`;\n  const { data } = await http.get(url);\n  return data;\n};\n\nconst deleteObject = async ({ apiKey, id }) => {\n  const url = `${LOCATION_HISTORY_API_BASE_URL}/objects/${id}?key=${apiKey}`;\n  const { data } = http.delete(url);\n  return data;\n};\n\nexport { addObject, editObject, getObjects, getObjectDetail, deleteObject };\n"],"names":["QPS_LIMIT","process","env","QPS_INTERVAL","LOCATION_HISTORY_API_BASE_URL","rateLimit","axios","create","maxRequests","perMilliseconds","addObject","async","apiKey","adminKey","object","url","data","http","post","id","put","getObjects","get","objects","map","getObjectDetail","Promise","all","objectDetailRequests","delete"],"mappings":"qDAGA,MAAeA,EAAGC,QAAQC,IAAIF,WAAa,EACrCG,EAAeF,QAAQC,IAAIC,cAAgB,IACdC,EACjCH,QAAQC,IAAIE,+BACZ,6CAEWC,EAAUC,EAAMC,SAAU,CACrCC,YAAaR,EACbS,gBAAiBN,IAGJO,EAAGC,OAASC,SAAQC,WAAUC,aAC3C,MAAMC,EAAO,GAAEX,iBAA6CQ,cAAmBC,KACzEG,KAAEA,SAAmBC,EAACC,KAAKH,EAAKD,GACtC,OACFE,KAEmBL,OAASC,SAAQC,WAAUM,KAAIL,aAChD,MAASC,EAAI,GAAEX,aAAyCe,SAAUP,cAAmBC,KAC/EG,KAAEA,SAAeC,EAAKG,IAAIL,EAAKD,GACrC,OAAOE,GAGOK,EAAGV,OAASC,aAC1B,MAASG,EAAI,GAAEX,iBAA6CQ,KACtDI,KAAEA,SAAeV,EAAMgB,IAAIP,KACJC,EAAKO,QAAQC,IAAI,EAAGL,QAC/CM,EAAgB,CAAEb,SAAQO,QAG5B,aAD6BO,QAACC,IAAIC,EAEpCL,IAEwBZ,OAASC,SAAQO,SACvC,MAAMJ,EAAO,GAAEX,aAAyCe,SAAUP,KAC5DI,KAAEA,SAAmBC,EAACK,IAAIP,GAChC,OACFC,KAEqBL,OAASC,SAAQO,SACpC,MAASJ,EAAI,GAAEX,aAAyCe,SAAUP,KAC5DI,KAAEA,GAASC,EAAKY,OAAOd,GAC7B,OAAOC"}